- hosts: webserver
  tasks:
    #install nginx latest and apt get update=update_cache
    - name: install nginx
      apt: name=nginx state=latest update_cache
    - name: ensure nginx is running (and enable it at boot)
      service: name=nginx state=started enabled=yes
    #good practice to write sites-available ans sites-enabled. sites-available - presented with separeted appliacatiom.
    #site-enabled keeps symlinks from sites-enabled. nginx.conf - keeps global configs for nginx
    -name: write the nginx config file and restart nginx
      file: src=nginx.conf dest=/etc/nginx/sites-available/nginx.conf
      become: yes
    -name: create symlink
      file: src=dest=/etc/nginx/sites-available/nginx.conf dest=/etc/nginx/sites-enabled/default state=link
      become: yes
    -name: copy the content of static website
      copy: src=static_site/ dest=/static_site
    -name: restart nginx
    service:
      name: nginx
      state: restarted 
    become: yes


      
